{% extends "base_template.html" %} {% block content %}
<!-- jumbotron -->

Detailed Attendance for student {{student}} and course {{course}}
    <!-- div for attendance based on present and absent days -->
    <div class="container">
        <h1>Total Attendances =  {{attendances | length}}</h1>
        <!-- display student details here -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Course Name</th>
                    <th scope="col">Course Credit</th>
                    <th scope="col">ForDate</th>
                    <th scope="col">isPresent</th>
                    <th scope="col">Total Attendance</th>
                    <th scope="col">Add Today's Attendance</th>
                    <th scope="col">View Detailed Attendance</th>
                </tr>
            </thead>
            <tbody>
                <tr> {% for attendace in attendances %}
                    {{attendace.course.name}} == {{course}}
                    <!-- user =  '{{user.username|stringformat:'s'}}'    
                      student = '{{attendace.student|stringformat:'s'}}' <br/> -->{% if user.username|stringformat:"s" == attendace.student|stringformat:"s" %}
                      {% if attendace.course.name|stringformat:"s" == course|stringformat:"s" %}
                    <th scope="row">{{attendace.course}}</th>
                    <td>{{attendace.course.credit}}</td>
                    <td>{{attendace.forDate}}</td>
                    <td>{{attendace.isPresent}}</td>
                    <!-- <td>{{attendace.totalAttendanceUptoToday | stringformat:'s'}}</td> -->
                    <td>{% widthratio attendace.totalAttendanceUptoToday attendace.course.totalClassDay 100 %} %</td>
                    
                    <td>
                        <form action="add/" method="POST" id="buttonForm"> {% csrf_token %}
                            <!-- <input type="hidden" name="course" value="{{attendace.course}}" /> -->
                            <!-- <input type="hidden" name="course11" value="coursehardcoded" /> -->
                            <input type="hidden" name="student" value="{{attendace.student}}" />
                            <input type="hidden" name="course" value="{{attendace.course}}" /> {% now "Y-m-d" as todays_date %} {% if attendace.modified_date|date:"Y-m-d" != todays_date %}
                            <button class="btn btn-primary my-2 my-sm-0 " type="submit" name="add" value="Add">Add</button> {% else %}
                            <button class="btn btn-primary my-2 my-sm-0 " type="submit" name="add" value="Add" disabled>Add</button> {% endif %}
                            <!-- <button  class="btn btn-primary my-2 my-sm-0 my-add-button"  type="submit" name="add" value="Add">Add-{{attendace.course}}-{{attendace.student}}</button> -->
                        </form>
                    </td>
    
                    <!-- view button  -->
                    <td>
                        <form action="view/" method="POST" id="buttonViewForm"> {% csrf_token %}
                            <!-- <input type="hidden" name="course" value="{{attendace.course}}" /> -->
                            <!-- <input type="hidden" name="course11" value="coursehardcoded" /> -->
                            <input type="hidden" name="student" value="{{attendace.student}}" />
                            <input type="hidden" name="course" value="{{attendace.course}}" /> 
                            <button class="btn btn-primary my-2 my-sm-0 " type="submit" name="add" value="Add">View</button> 
                            
                            <!-- <button  class="btn btn-primary my-2 my-sm-0 my-add-button"  type="submit" name="add" value="Add">Add-{{attendace.course}}-{{attendace.student}}</button> -->
                        </form>
                    </td>
    
    
    
    
                </tr> {% endif %} {% endif %} {% endfor %} </tbody>
        </table></div>
</div> {% endblock %}